"use strict";(self.webpackChunkwiki=self.webpackChunkwiki||[]).push([[76051],{3905:(e,n,r)=>{r.d(n,{Zo:()=>p,kt:()=>h});var t=r(67294);function o(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function a(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function l(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?a(Object(r),!0).forEach((function(n){o(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}function c(e,n){if(null==e)return{};var r,t,o=function(e,n){if(null==e)return{};var r,t,o={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(o[r]=e[r]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}var s=t.createContext({}),u=function(e){var n=t.useContext(s),r=n;return e&&(r="function"==typeof e?e(n):l(l({},n),e)),r},p=function(e){var n=u(e.components);return t.createElement(s.Provider,{value:n},e.children)},i={inlineCode:"code",wrapper:function(e){var n=e.children;return t.createElement(t.Fragment,{},n)}},m=t.forwardRef((function(e,n){var r=e.components,o=e.mdxType,a=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),m=u(r),h=o,y=m["".concat(s,".").concat(h)]||m[h]||i[h]||a;return r?t.createElement(y,l(l({ref:n},p),{},{components:r})):t.createElement(y,l({ref:n},p))}));function h(e,n){var r=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=r.length,l=new Array(a);l[0]=m;var c={};for(var s in n)hasOwnProperty.call(n,s)&&(c[s]=n[s]);c.originalType=e,c.mdxType="string"==typeof e?e:o,l[1]=c;for(var u=2;u<a;u++)l[u]=r[u];return t.createElement.apply(null,l)}return t.createElement.apply(null,r)}m.displayName="MDXCreateElement"},2830:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>i,frontMatter:()=>a,metadata:()=>c,toc:()=>u});var t=r(87462),o=(r(67294),r(3905));const a={},l="Proxy",c={unversionedId:"\u9762\u8bd5\u62bc\u9898/JS\u62bc\u9898/JS \u624b\u5199\u7bc7/Proxy",id:"\u9762\u8bd5\u62bc\u9898/JS\u62bc\u9898/JS \u624b\u5199\u7bc7/Proxy",title:"Proxy",description:"\u89c2\u5bdf\u8005\u6a21\u5f0f",source:"@site/docs/\u9762\u8bd5\u62bc\u9898/JS\u62bc\u9898/JS \u624b\u5199\u7bc7/Proxy.md",sourceDirName:"\u9762\u8bd5\u62bc\u9898/JS\u62bc\u9898/JS \u624b\u5199\u7bc7",slug:"/\u9762\u8bd5\u62bc\u9898/JS\u62bc\u9898/JS \u624b\u5199\u7bc7/Proxy",permalink:"/docs/\u9762\u8bd5\u62bc\u9898/JS\u62bc\u9898/JS \u624b\u5199\u7bc7/Proxy",draft:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/\u9762\u8bd5\u62bc\u9898/JS\u62bc\u9898/JS \u624b\u5199\u7bc7/Proxy.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"\u6709\u8fb9\u754c",permalink:"/docs/\u9762\u8bd5\u62bc\u9898/JS\u62bc\u9898/JS \u624b\u5199\u7bc7/\u624b\u5199\u53ef\u62d6\u66f3 div/\u6709\u8fb9\u754c"},next:{title:"\u624b\u5199 AJAX",permalink:"/docs/\u9762\u8bd5\u62bc\u9898/JS\u62bc\u9898/JS \u624b\u5199\u7bc7/\u624b\u5199 AJAX"}},s={},u=[{value:"\u89c2\u5bdf\u8005\u6a21\u5f0f",id:"\u89c2\u5bdf\u8005\u6a21\u5f0f",level:2},{value:"\u53c2\u8003\u6587\u7ae0",id:"\u53c2\u8003\u6587\u7ae0",level:2}],p={toc:u};function i(e){let{components:n,...r}=e;return(0,o.kt)("wrapper",(0,t.Z)({},p,r,{components:n,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"proxy"},"Proxy"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-JS"},'let hero = {\n  name: "\u8d75\u4e91",\n  age: 25\n}\n\nlet handler = {\n  get:(hero,name)=>{\n    const heroName = `\u82f1\u96c4\u540d\u662f${hero.name}`\n    return heroName\n  },\n  set:(hero,name,value)=>{\n    console.log(`${hero.name}change to${value}`)\n    hero[name] = value\n    return true\n  }\n}\n\nlet heroProxy = new Proxy(hero, handler);\n\nconsole.log(heroProxy.name);\nheroProxy.name = "\u9ec4\u5fe0";\nconsole.log(heroProxy.name);\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-JS"},"let hero = {\n  name:'\u8d75\u4e91',\n  hp: 100,\n  sp: 100,\n  equipment:['\u9a6c','\u957f\u67aa']\n}\n\nlet handler = {\n  set(target, property, value) {\n    console.log(`hero's ${property} change to ${value}`);\n    target[property] = value;\n    return true;\n  }\n}\n\n// let heroProxy = new Proxy(hero, handler);\n// heroProxy.hp = 200;\n// // --\x3e hero's hp change to 200\n// console.log(hero.hp);\n// // --\x3e 200\n\nlet heroProxy = new Proxy(hero.equipment, handler);\nheroProxy.push('\u4f69\u5251');\nconsole.log(hero.equipment);\n// --\x3e [\"\u9a6c\", \"\u957f\u67aa\", \"\u4f69\u5251\"]\n")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-JS"},"let hero = {\n  name: '\u8d75\u4e91',\n  hp: 100,\n  sp: 100,\n  equipment: ['\u9a6c', '\u957f\u67aa']\n}\n\nlet handler = {\n  get(target, name, receiver) {\n    if (name === \"name\") {\n      console.log(\"success\");\n    } else {\n      console.log(\"failure\");\n    }\n    return Reflect.get(target, name, receiver);\n  }\n}\n\nlet heroProxy = new Proxy(hero, handler);\nconsole.log(heroProxy.name);\n// --\x3e success\n// --\x3e \u8d75\u4e91\n")),(0,o.kt)("h2",{id:"\u89c2\u5bdf\u8005\u6a21\u5f0f"},"\u89c2\u5bdf\u8005\u6a21\u5f0f"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-JS"},"let hero = {\n  name: '\u8d75\u4e91',\n  hp: 100,\n  sp: 100,\n  equipment: ['\u9a6c', '\u957f\u67aa']\n}\n\nconst handler = {\n  set(target, key, value, receiver) {\n   //  console.log('\u76ee\u6807\u5bf9\u8c61', target)\n   //  console.log('\u5c5e\u6027\u540d\u79f0', key)\n   //  console.log('\u503c', value)\n   //  console.log('\u4e0a\u4e0b\u6587', receiver)\n    // \u5185\u90e8\u8c03\u7528\u5bf9\u5e94\u7684 Reflect \u65b9\u6cd5 \u8fd4\u56de\u503c\uff1aboolean\n    const result = Reflect.set(target, key, value, receiver);\n\n    // \u56de\u8c03\uff1a\u6267\u884c\u89c2\u5bdf\u8005\u961f\u5217\n    observableArray.forEach(item => item());\n    return result;\n  }\n}\n\n// \u521d\u59cb\u5316Proxy\u5bf9\u8c61\uff0c\u8bbe\u7f6e\u62e6\u622a\u64cd\u4f5c\nconst createProxy = (obj) => new Proxy(obj, handler);\n// \u88ab\u89c2\u5bdf\u8005\u4ee3\u7406\uff08\u82f1\u96c4\u4ee3\u7406\uff09\nconst heroProxy = createProxy(hero);\n\n\n// \u521d\u59cb\u5316\u89c2\u5bdf\u8005\u961f\u5217\nconst observableArray = new Set();\n\n// \u5c06\u76d1\u542c\u51fd\u6570\u52a0\u5165\u961f\u5217\nobservableArray.add(() => {\n  console.log('\u89c2\u5bdf\u8005\u76d1\u542c\u51fd\u6570',heroProxy.name);\n});\n\nheroProxy.name = \"\u9ec4\u5fe0\";\n")),(0,o.kt)("h2",{id:"\u53c2\u8003\u6587\u7ae0"},"\u53c2\u8003\u6587\u7ae0"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://zhuanlan.zhihu.com/p/60126477"},"\u6df1\u5165\u5b9e\u8df5 ES6 Proxy & Reflect"))))}i.isMDXComponent=!0}}]);